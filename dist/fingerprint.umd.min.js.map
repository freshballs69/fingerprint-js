{"version":3,"file":"fingerprint.umd.min.js","sources":["../src/utils/hash.ts","../src/collectors/browser.ts","../src/collectors/timezone.ts","../src/collectors/storage.ts","../src/collectors/canvas.ts","../src/collectors/fonts.ts","../src/collectors/plugins.ts","../src/collectors/webrtc.ts","../src/config.ts","../src/sender.ts","../src/index.ts","../src/collectors/webgl.ts","../src/collectors/audio.ts","../src/collectors/screen.ts","../src/collectors/hardware.ts"],"sourcesContent":["export async function sha256(message: string): Promise<string> {\n  const msgBuffer = new TextEncoder().encode(message);\n  const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);\n  const hashArray = Array.from(new Uint8Array(hashBuffer));\n  return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\n}\n\nexport function murmur3(str: string, seed: number = 0): number {\n  let h1 = seed >>> 0;\n  const c1 = 0xcc9e2d51;\n  const c2 = 0x1b873593;\n\n  for (let i = 0; i < str.length; i++) {\n    let k1 = str.charCodeAt(i);\n    k1 = Math.imul(k1, c1);\n    k1 = (k1 << 15) | (k1 >>> 17);\n    k1 = Math.imul(k1, c2);\n\n    h1 ^= k1;\n    h1 = (h1 << 13) | (h1 >>> 19);\n    h1 = Math.imul(h1, 5) + 0xe6546b64;\n  }\n\n  h1 ^= str.length;\n  h1 ^= h1 >>> 16;\n  h1 = Math.imul(h1, 0x85ebca6b);\n  h1 ^= h1 >>> 13;\n  h1 = Math.imul(h1, 0xc2b2ae35);\n  h1 ^= h1 >>> 16;\n\n  return h1 >>> 0;\n}\n","export function getUserAgent(): string {\n  return navigator.userAgent;\n}\n\nexport function getLanguage(): string {\n  return navigator.language;\n}\n\nexport function getLanguages(): string[] {\n  return Array.from(navigator.languages || [navigator.language]);\n}\n\nexport function getPlatform(): string {\n  return navigator.platform;\n}\n\nexport function getVendor(): string {\n  return navigator.vendor || '';\n}\n\nexport function getVendorFlavors(): string[] {\n  const dominated: string[] = [];\n  const domPropNames = Object.getOwnPropertyNames(window);\n\n  const vendorChecks: { [key: string]: string[] } = {\n    chrome: ['chrome'],\n    firefox: ['InstallTrigger'],\n    safari: ['safari'],\n    edge: ['msWriteProfilerMark'],\n    opera: ['opr', 'opera'],\n  };\n\n  for (const [browser, props] of Object.entries(vendorChecks)) {\n    for (const prop of props) {\n      if (domPropNames.includes(prop) || prop in window) {\n        dominated.push(browser);\n        break;\n      }\n    }\n  }\n\n  return dominated;\n}\n\nexport function getDoNotTrack(): string | null {\n  return navigator.doNotTrack || null;\n}\n\nexport function getCookiesEnabled(): boolean {\n  try {\n    document.cookie = 'fp_test=1';\n    const result = document.cookie.indexOf('fp_test=') !== -1;\n    document.cookie = 'fp_test=1; expires=Thu, 01 Jan 1970 00:00:00 UTC';\n    return result;\n  } catch {\n    return false;\n  }\n}\n\nexport interface WebdriverResult {\n  detected: boolean;\n  signals: string[];\n}\n\nexport function getWebdriverPresent(): WebdriverResult {\n  const signals: string[] = [];\n\n  // Standard WebDriver flag (Selenium, Puppeteer, Playwright)\n  if (navigator.webdriver === true) {\n    signals.push('navigator.webdriver');\n  }\n\n  // ChromeDriver detection\n  const docKeys = Object.keys(document);\n  for (const key of docKeys) {\n    if (key.startsWith('$cdc_') || key.startsWith('$wdc_')) {\n      signals.push('chromedriver');\n      break;\n    }\n  }\n\n  // Window-based automation detection\n  const win = window as Window & {\n    callPhantom?: unknown;\n    _phantom?: unknown;\n    phantom?: unknown;\n    __nightmare?: unknown;\n    domAutomation?: unknown;\n    domAutomationController?: unknown;\n    _selenium?: unknown;\n    __webdriver_script_fn?: unknown;\n    __driver_evaluate?: unknown;\n    __webdriver_evaluate?: unknown;\n    __selenium_evaluate?: unknown;\n    __fxdriver_evaluate?: unknown;\n    __driver_unwrapped?: unknown;\n    __webdriver_unwrapped?: unknown;\n    __selenium_unwrapped?: unknown;\n    __fxdriver_unwrapped?: unknown;\n    _Selenium_IDE_Recorder?: unknown;\n    _WEBDRIVER_ELEM_CACHE?: unknown;\n    ChromeDriverw?: unknown;\n    __$webdriverAsyncExecutor?: unknown;\n    webdriver?: unknown;\n    __webdriverFunc?: unknown;\n    Cypress?: unknown;\n  };\n\n  if (win.callPhantom || win._phantom || win.phantom) {\n    signals.push('phantomjs');\n  }\n\n  if (win.__nightmare) {\n    signals.push('nightmare');\n  }\n\n  if (win.domAutomation || win.domAutomationController) {\n    signals.push('domAutomation');\n  }\n\n  // Selenium-specific\n  if (win._selenium || win.__webdriver_script_fn || win.__driver_evaluate ||\n      win.__webdriver_evaluate || win.__selenium_evaluate || win.__fxdriver_evaluate ||\n      win.__driver_unwrapped || win.__webdriver_unwrapped || win.__selenium_unwrapped ||\n      win.__fxdriver_unwrapped || win._Selenium_IDE_Recorder || win._WEBDRIVER_ELEM_CACHE) {\n    signals.push('selenium');\n  }\n\n  // Webdriver async executor (Selenium)\n  if (win.__$webdriverAsyncExecutor) {\n    signals.push('webdriverAsyncExecutor');\n  }\n\n  // Generic webdriver property on window\n  if (win.webdriver || win.__webdriverFunc) {\n    signals.push('webdriverWindow');\n  }\n\n  // Cypress\n  if (win.Cypress) {\n    signals.push('cypress');\n  }\n\n  // Check for headless indicators in user agent\n  const ua = navigator.userAgent.toLowerCase();\n  if (ua.includes('headless')) {\n    signals.push('headlessUA');\n  }\n\n\n  return {\n    detected: signals.length > 0,\n    signals,\n  };\n}\n","export function getTimezone(): string {\n  try {\n    return Intl.DateTimeFormat().resolvedOptions().timeZone;\n  } catch {\n    return '';\n  }\n}\n\nexport function getTimezoneOffset(): number {\n  return new Date().getTimezoneOffset();\n}\n","export function hasSessionStorage(): boolean {\n  try {\n    return !!window.sessionStorage;\n  } catch {\n    return false;\n  }\n}\n\nexport function hasLocalStorage(): boolean {\n  try {\n    return !!window.localStorage;\n  } catch {\n    return false;\n  }\n}\n\nexport function hasIndexedDb(): boolean {\n  try {\n    return !!window.indexedDB;\n  } catch {\n    return false;\n  }\n}\n","import { murmur3 } from '../utils/hash';\n\nexport function getCanvasFingerprint(): string {\n  try {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return '';\n\n    canvas.width = 200;\n    canvas.height = 50;\n\n    // Draw text with specific styling\n    ctx.textBaseline = 'alphabetic';\n    ctx.font = '14px Arial';\n    ctx.fillStyle = '#f60';\n    ctx.fillRect(125, 1, 62, 20);\n\n    ctx.fillStyle = '#069';\n    ctx.fillText('Fingerprint', 2, 15);\n\n    ctx.fillStyle = 'rgba(102, 204, 0, 0.7)';\n    ctx.fillText('Canvas Test', 4, 45);\n\n    // Draw shapes\n    ctx.globalCompositeOperation = 'multiply';\n    ctx.fillStyle = 'rgb(255,0,255)';\n    ctx.beginPath();\n    ctx.arc(50, 50, 50, 0, Math.PI * 2, true);\n    ctx.closePath();\n    ctx.fill();\n\n    ctx.fillStyle = 'rgb(0,255,255)';\n    ctx.beginPath();\n    ctx.arc(100, 50, 50, 0, Math.PI * 2, true);\n    ctx.closePath();\n    ctx.fill();\n\n    const dataUrl = canvas.toDataURL();\n    return murmur3(dataUrl).toString(16);\n  } catch {\n    return '';\n  }\n}\n","const FONT_LIST = [\n  'Arial',\n  'Arial Black',\n  'Arial Narrow',\n  'Bookman Old Style',\n  'Century',\n  'Century Gothic',\n  'Comic Sans MS',\n  'Courier',\n  'Courier New',\n  'Georgia',\n  'Helvetica',\n  'Impact',\n  'Lucida Console',\n  'Lucida Sans Unicode',\n  'Microsoft Sans Serif',\n  'Palatino Linotype',\n  'Tahoma',\n  'Times',\n  'Times New Roman',\n  'Trebuchet MS',\n  'Verdana',\n  'Wingdings',\n];\n\nconst BASE_FONTS = ['monospace', 'sans-serif', 'serif'];\nconst TEST_STRING = 'mmmmmmmmmmlli';\nconst TEST_SIZE = '72px';\n\nexport function getAvailableFonts(): string[] {\n  const available: string[] = [];\n\n  const canvas = document.createElement('canvas');\n  const ctx = canvas.getContext('2d');\n\n  if (!ctx) return available;\n\n  const getWidth = (fontFamily: string): number => {\n    ctx.font = `${TEST_SIZE} ${fontFamily}`;\n    return ctx.measureText(TEST_STRING).width;\n  };\n\n  const baseWidths: { [key: string]: number } = {};\n  for (const baseFont of BASE_FONTS) {\n    baseWidths[baseFont] = getWidth(baseFont);\n  }\n\n  for (const font of FONT_LIST) {\n    let detected = false;\n\n    for (const baseFont of BASE_FONTS) {\n      const testWidth = getWidth(`\"${font}\", ${baseFont}`);\n      if (testWidth !== baseWidths[baseFont]) {\n        detected = true;\n        break;\n      }\n    }\n\n    if (detected) {\n      available.push(font);\n    }\n  }\n\n  return available;\n}\n","export function getPlugins(): string[] {\n  const plugins: string[] = [];\n\n  if (!navigator.plugins) return plugins;\n\n  for (let i = 0; i < navigator.plugins.length; i++) {\n    const plugin = navigator.plugins[i];\n    if (plugin) {\n      plugins.push(plugin.name);\n    }\n  }\n\n  return plugins.sort();\n}\n","export interface WebRTCInfo {\n  available: boolean;\n  localIPs: string[];\n}\n\n// Global STUN server host configuration stored in window\nconst DEFAULT_STUN_HOST = 'stun.deadbeef.pp.ua';\n\ndeclare global {\n  interface Window {\n    __stunServerHost?: string;\n  }\n}\n\nexport function getStunServerHost(): string {\n  if (typeof window !== 'undefined' && window.__stunServerHost) {\n    return window.__stunServerHost;\n  }\n  return DEFAULT_STUN_HOST;\n}\n\nexport function setStunServerHost(host: string): void {\n  if (typeof window !== 'undefined') {\n    window.__stunServerHost = host;\n  }\n}\n\ninterface StunInitResponse {\n  port: number;\n  ttl: number;\n}\n\nasync function initStunServer(reqId: string): Promise<StunInitResponse | null> {\n  try {\n    const host = getStunServerHost();\n    const response = await fetch(`https://${host}/init?req_id=${encodeURIComponent(reqId)}`);\n    if (!response.ok) {\n      return null;\n    }\n    return await response.json();\n  } catch {\n    return null;\n  }\n}\n\nexport async function getWebRTCInfo(reqId?: string): Promise<WebRTCInfo> {\n  const result: WebRTCInfo = {\n    available: false,\n    localIPs: [],\n  };\n\n  if (typeof RTCPeerConnection === 'undefined') {\n    return result;\n  }\n\n  result.available = true;\n\n  // Get dynamic STUN port from init endpoint\n  const generatedReqId = reqId || crypto.randomUUID();\n  const stunInit = await initStunServer(generatedReqId);\n\n  const iceServers: RTCIceServer[] = stunInit\n    ? [{ urls: `stun:${getStunServerHost()}:${stunInit.port}` }]\n    : [];\n\n  try {\n    const pc = new RTCPeerConnection({\n      iceServers,\n    });\n\n    const ips = new Set<string>();\n\n    return new Promise((resolve) => {\n      const timeout = setTimeout(() => {\n        pc.close();\n        result.localIPs = Array.from(ips);\n        resolve(result);\n      }, 1000);\n\n      pc.onicecandidate = (event) => {\n        if (!event.candidate) {\n          clearTimeout(timeout);\n          pc.close();\n          result.localIPs = Array.from(ips);\n          resolve(result);\n          return;\n        }\n\n        const candidate = event.candidate.candidate;\n        const ipMatch = candidate.match(/(\\d{1,3}\\.){3}\\d{1,3}/);\n        if (ipMatch) {\n          ips.add(ipMatch[0]);\n        }\n\n        const ipv6Match = candidate.match(/([a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/i);\n        if (ipv6Match) {\n          ips.add(ipv6Match[0]);\n        }\n      };\n\n      pc.createDataChannel('');\n      pc.createOffer()\n        .then((offer) => pc.setLocalDescription(offer))\n        .catch(() => {\n          clearTimeout(timeout);\n          pc.close();\n          resolve(result);\n        });\n    });\n  } catch {\n    return result;\n  }\n}\n","declare const process: { env: Record<string, string | undefined> } | undefined;\n\nconst DEFAULT_BASE_URL = 'http://127.0.0.1:5001';\n\nexport interface Config {\n  baseUrl: string;\n  trackUrl: string | null;\n}\n\nexport function getConfig(): Config {\n  let baseUrl: string = DEFAULT_BASE_URL;\n  let trackUrl: string | null = null;\n\n  // Check for environment variable (build-time injection via bundlers)\n  if (typeof process !== 'undefined') {\n    if (process.env?.FINGERPRINT_BASE_URL) {\n      baseUrl = process.env.FINGERPRINT_BASE_URL;\n    }\n    if (process.env?.TRACK_API) {\n      trackUrl = process.env.TRACK_API;\n    }\n  }\n\n  // Check for window global (runtime configuration) - overrides env vars\n  if (typeof window !== 'undefined') {\n    const win = window as Window & {\n      FINGERPRINT_BASE_URL?: string;\n      TRACK_API?: string;\n    };\n    if (win.FINGERPRINT_BASE_URL) {\n      baseUrl = win.FINGERPRINT_BASE_URL;\n    }\n    if (win.TRACK_API) {\n      trackUrl = win.TRACK_API;\n    }\n  }\n\n  // Remove trailing slash if present\n  baseUrl = baseUrl.replace(/\\/$/, '');\n\n  return {\n    baseUrl,\n    trackUrl,\n  };\n}\n\nexport function getInitUrl(publicKey?: string): string {\n  const config = getConfig();\n  const url = new URL(`${config.baseUrl}/api/v2/init`);\n  if (publicKey) {\n    url.searchParams.set('public_key', publicKey);\n  }\n  return url.toString();\n}\n\nexport function getEndpointUrl(): string {\n  const config = getConfig();\n  return `${config.baseUrl}/api/v2/fingerprint`;\n}\n","import { FingerprintResult } from './types';\n\nexport interface SendOptions {\n  url: string;\n  method?: 'POST' | 'PUT';\n  headers?: Record<string, string>;\n}\n\nexport async function sendFingerprint(\n  result: FingerprintResult,\n  options: SendOptions\n): Promise<Response> {\n  const { url, method = 'POST', headers = {} } = options;\n\n  const response = await fetch(url, {\n    method,\n    headers: {\n      'Content-Type': 'application/json',\n      ...headers,\n    },\n    body: JSON.stringify(result),\n  });\n\n  return response;\n}\n","import { FingerprintComponents, FingerprintResult, FingerprintOptions, CollectOptions } from './types';\nimport { sha256 } from './utils/hash';\nimport {\n  getUserAgent,\n  getLanguage,\n  getLanguages,\n  getPlatform,\n  getVendor,\n  getVendorFlavors,\n  getDoNotTrack,\n  getCookiesEnabled,\n  getWebdriverPresent,\n} from './collectors/browser';\nimport {\n  getColorDepth,\n  getScreenResolution,\n  getAvailableScreenResolution,\n} from './collectors/screen';\nimport { getTimezone, getTimezoneOffset } from './collectors/timezone';\nimport { hasSessionStorage, hasLocalStorage, hasIndexedDb } from './collectors/storage';\nimport { getHardwareConcurrency, getDeviceMemory, getMaxTouchPoints } from './collectors/hardware';\nimport { getCanvasFingerprint } from './collectors/canvas';\nimport { getWebGLInfo } from './collectors/webgl';\nimport { getAvailableFonts } from './collectors/fonts';\nimport { getAudioFingerprint } from './collectors/audio';\nimport { getPlugins } from './collectors/plugins';\nimport { getWebRTCInfo, setStunServerHost, getStunServerHost } from './collectors/webrtc';\nimport { getConfig, getInitUrl, getEndpointUrl } from './config';\nimport { sendFingerprint, SendOptions } from './sender';\n\nexport { FingerprintComponents, FingerprintResult, FingerprintOptions, CollectOptions } from './types';\nexport { SendOptions } from './sender';\n\nasync function collectComponents(options: FingerprintOptions = {}, reqId?: string): Promise<FingerprintComponents> {\n  const exclude = new Set(options.excludeComponents || []);\n\n  const webglInfo = !exclude.has('webglVendor') || !exclude.has('webglRenderer') || !exclude.has('webglVersion')\n    ? getWebGLInfo()\n    : { vendor: '', renderer: '', version: '' };\n\n  const audioFingerprint = !exclude.has('audio')\n    ? await getAudioFingerprint()\n    : 0;\n\n  const webrtcInfo = !exclude.has('webrtcAvailable') || !exclude.has('webrtcLocalIPs')\n    ? await getWebRTCInfo(reqId)\n    : { available: false, localIPs: [] };\n\n  return {\n    userAgent: !exclude.has('userAgent') ? getUserAgent() : '',\n    language: !exclude.has('language') ? getLanguage() : '',\n    languages: !exclude.has('languages') ? getLanguages() : [],\n    colorDepth: !exclude.has('colorDepth') ? getColorDepth() : 0,\n    screenResolution: !exclude.has('screenResolution') ? getScreenResolution() : [0, 0],\n    availableScreenResolution: !exclude.has('availableScreenResolution') ? getAvailableScreenResolution() : [0, 0],\n    timezone: !exclude.has('timezone') ? getTimezone() : '',\n    timezoneOffset: !exclude.has('timezoneOffset') ? getTimezoneOffset() : 0,\n    sessionStorage: !exclude.has('sessionStorage') ? hasSessionStorage() : false,\n    localStorage: !exclude.has('localStorage') ? hasLocalStorage() : false,\n    indexedDb: !exclude.has('indexedDb') ? hasIndexedDb() : false,\n    cookiesEnabled: !exclude.has('cookiesEnabled') ? getCookiesEnabled() : false,\n    platform: !exclude.has('platform') ? getPlatform() : '',\n    hardwareConcurrency: !exclude.has('hardwareConcurrency') ? getHardwareConcurrency() : 0,\n    deviceMemory: !exclude.has('deviceMemory') ? getDeviceMemory() : null,\n    maxTouchPoints: !exclude.has('maxTouchPoints') ? getMaxTouchPoints() : 0,\n    vendor: !exclude.has('vendor') ? getVendor() : '',\n    vendorFlavors: !exclude.has('vendorFlavors') ? getVendorFlavors() : [],\n    canvas: !exclude.has('canvas') ? getCanvasFingerprint() : '',\n    webglVendor: !exclude.has('webglVendor') ? webglInfo.vendor : '',\n    webglRenderer: !exclude.has('webglRenderer') ? webglInfo.renderer : '',\n    webglVersion: !exclude.has('webglVersion') ? webglInfo.version : '',\n    fonts: !exclude.has('fonts') ? getAvailableFonts() : [],\n    audio: !exclude.has('audio') ? audioFingerprint : 0,\n    plugins: !exclude.has('plugins') ? getPlugins() : [],\n    doNotTrack: !exclude.has('doNotTrack') ? getDoNotTrack() : null,\n    webrtcAvailable: !exclude.has('webrtcAvailable') ? webrtcInfo.available : false,\n    webrtcLocalIPs: !exclude.has('webrtcLocalIPs') ? webrtcInfo.localIPs : [],\n    webdriver: !exclude.has('webdriver') ? getWebdriverPresent() : { detected: false, signals: [] },\n  };\n}\n\nexport async function getFingerprint(options: FingerprintOptions = {}, reqId?: string): Promise<FingerprintResult> {\n  const components = await collectComponents(options, reqId);\n  const componentsString = JSON.stringify(components);\n  const hash = await sha256(componentsString);\n\n  return {\n    hash,\n    components,\n    timestamp: Date.now(),\n  };\n}\n\nfunction buildTrackUrl(trackUrl: string, reqId: string): string {\n  const url = new URL(trackUrl);\n  if (!url.searchParams.has('req_id')) {\n    url.searchParams.set('req_id', reqId);\n  }\n  return url.toString();\n}\n\nfunction fireAndForget(trackUrl: string | null, reqId: string): void {\n  if (!trackUrl) {\n    return;\n  }\n  const url = buildTrackUrl(trackUrl, reqId);\n  fetch(url).catch(() => {});\n}\n\ninterface InitResponse {\n  reqId: string | null;\n  trackUrl: string | null;\n  stun: string | null;\n}\n\nasync function initRequest(publicKey?: string): Promise<InitResponse> {\n  const initUrl = getInitUrl(publicKey);\n  const response = await fetch(initUrl);\n  if (!response.ok) {\n    throw new Error(`Init failed: ${response.status}`);\n  }\n  const data = await response.json();\n  return {\n    reqId: typeof data.req_id === 'string' ? data.req_id : null,\n    trackUrl: typeof data.track_url === 'string' ? data.track_url : null,\n    stun: typeof data.stun === 'string' ? data.stun : null,\n  };\n}\n\nexport async function collect(options: CollectOptions = {}): Promise<string | null> {\n  const initData = await initRequest(options.public_key);\n  if (!initData.reqId) {\n    return null;\n  }\n\n  // Set STUN server if provided by init response\n  if (initData.stun) {\n    setStunServerHost(initData.stun);\n  }\n\n  const result = await new Promise<FingerprintResult>((resolve, reject) => {\n    if (document.readyState === 'complete' || document.readyState === 'interactive') {\n      getFingerprint(options, initData.reqId || undefined).then(resolve).catch(reject);\n    } else {\n      document.addEventListener('DOMContentLoaded', () => {\n        getFingerprint(options, initData.reqId || undefined).then(resolve).catch(reject);\n      });\n    }\n  });\n\n  const config = getConfig();\n  let reqId = initData.reqId;\n  const trackUrl = initData.trackUrl || config.trackUrl;\n  const endpointUrl = getEndpointUrl();\n\n  try {\n    (result as FingerprintResult & { req_id?: string }).req_id = reqId;\n    const response = await sendFingerprint(result, { url: endpointUrl });\n    const contentType = response.headers.get('content-type') || '';\n    if (contentType.includes('application/json')) {\n      const data = await response.json();\n      if (data && typeof data.req_id === 'string') {\n        reqId = data.req_id;\n      }\n    }\n  } catch {\n    // Silently fail if endpoint is unavailable\n  }\n\n  fireAndForget(trackUrl, reqId);\n\n  return reqId;\n}\n\nexport { sendFingerprint };\nexport { setStunServerHost, getStunServerHost };\n\ntype FingerprintAPI = {\n  getFingerprint: (options?: FingerprintOptions, reqId?: string) => Promise<FingerprintResult>;\n  collect: (options?: CollectOptions) => Promise<string | null>;\n  sendFingerprint: typeof sendFingerprint;\n  setStunServerHost: typeof setStunServerHost;\n};\n\ntype FingerprintFactory = {\n  (options?: CollectOptions): FingerprintAPI;\n  getFingerprint: typeof getFingerprint;\n  collect: typeof collect;\n  sendFingerprint: typeof sendFingerprint;\n  setStunServerHost: typeof setStunServerHost;\n};\n\nfunction createAPI(defaultOptions: CollectOptions = {}): FingerprintAPI {\n  return {\n    getFingerprint: (options?: FingerprintOptions, reqId?: string) =>\n      getFingerprint({ ...defaultOptions, ...options }, reqId),\n    collect: (options?: CollectOptions) =>\n      collect({ ...defaultOptions, ...options }),\n    sendFingerprint,\n    setStunServerHost,\n  };\n}\n\nconst Fingerprint: FingerprintFactory = Object.assign(\n  (options?: CollectOptions) => createAPI(options),\n  {\n    getFingerprint,\n    collect,\n    sendFingerprint,\n    setStunServerHost,\n  }\n);\n\n// Auto-initialize when loaded via script tag\nif (typeof window !== 'undefined') {\n  (window as Window & { Fingerprint?: typeof Fingerprint }).Fingerprint = Fingerprint;\n}\n\nexport default Fingerprint;\n","interface WebGLInfo {\n  vendor: string;\n  renderer: string;\n  version: string;\n}\n\nexport function getWebGLInfo(): WebGLInfo {\n  const result: WebGLInfo = {\n    vendor: '',\n    renderer: '',\n    version: '',\n  };\n\n  try {\n    const canvas = document.createElement('canvas');\n    const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n\n    if (!gl || !(gl instanceof WebGLRenderingContext)) {\n      return result;\n    }\n\n    const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');\n\n    if (debugInfo) {\n      result.vendor = gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL) || '';\n      result.renderer = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) || '';\n    }\n\n    result.version = gl.getParameter(gl.VERSION) || '';\n  } catch {\n    // WebGL not available\n  }\n\n  return result;\n}\n","import { murmur3 } from '../utils/hash';\n\nexport async function getAudioFingerprint(): Promise<number> {\n  try {\n    const AudioContext = window.AudioContext || (window as Window & { webkitAudioContext?: typeof window.AudioContext }).webkitAudioContext;\n    if (!AudioContext) return 0;\n\n    const context = new AudioContext();\n    const oscillator = context.createOscillator();\n    const analyser = context.createAnalyser();\n    const gain = context.createGain();\n    const scriptProcessor = context.createScriptProcessor(4096, 1, 1);\n\n    const destination = context.destination;\n\n    oscillator.type = 'triangle';\n    oscillator.frequency.setValueAtTime(10000, context.currentTime);\n\n    gain.gain.setValueAtTime(0, context.currentTime);\n\n    oscillator.connect(analyser);\n    analyser.connect(scriptProcessor);\n    scriptProcessor.connect(gain);\n    gain.connect(destination);\n\n    oscillator.start(0);\n\n    const fingerprint = await new Promise<number>((resolve) => {\n      const frequencyData = new Float32Array(analyser.frequencyBinCount);\n      analyser.getFloatFrequencyData(frequencyData);\n\n      const dataString = frequencyData.slice(0, 50).join(',');\n      resolve(murmur3(dataString));\n    });\n\n    oscillator.disconnect();\n    analyser.disconnect();\n    scriptProcessor.disconnect();\n    gain.disconnect();\n    context.close();\n\n    return fingerprint;\n  } catch {\n    return 0;\n  }\n}\n","export function getColorDepth(): number {\n  return screen.colorDepth;\n}\n\nexport function getScreenResolution(): [number, number] {\n  return [screen.width, screen.height];\n}\n\nexport function getAvailableScreenResolution(): [number, number] {\n  return [screen.availWidth, screen.availHeight];\n}\n","export function getHardwareConcurrency(): number {\n  return navigator.hardwareConcurrency || 0;\n}\n\nexport function getDeviceMemory(): number | null {\n  return (navigator as Navigator & { deviceMemory?: number }).deviceMemory || null;\n}\n\nexport function getMaxTouchPoints(): number {\n  return navigator.maxTouchPoints || 0;\n}\n"],"names":["murmur3","str","seed","h1","i","length","k1","charCodeAt","Math","imul","getVendorFlavors","dominated","domPropNames","Object","getOwnPropertyNames","window","vendorChecks","chrome","firefox","safari","edge","opera","browser","props","entries","prop","includes","push","getCookiesEnabled","document","cookie","result","indexOf","_a","getWebdriverPresent","signals","navigator","webdriver","docKeys","keys","key","startsWith","win","callPhantom","_phantom","phantom","__nightmare","domAutomation","domAutomationController","_selenium","__webdriver_script_fn","__driver_evaluate","__webdriver_evaluate","__selenium_evaluate","__fxdriver_evaluate","__driver_unwrapped","__webdriver_unwrapped","__selenium_unwrapped","__fxdriver_unwrapped","_Selenium_IDE_Recorder","_WEBDRIVER_ELEM_CACHE","__$webdriverAsyncExecutor","__webdriverFunc","Cypress","userAgent","toLowerCase","detected","getTimezone","Intl","DateTimeFormat","resolvedOptions","timeZone","hasSessionStorage","sessionStorage","hasLocalStorage","localStorage","hasIndexedDb","indexedDB","getCanvasFingerprint","canvas","createElement","ctx","getContext","width","height","textBaseline","font","fillStyle","fillRect","fillText","globalCompositeOperation","beginPath","arc","PI","closePath","fill","toDataURL","toString","FONT_LIST","BASE_FONTS","getAvailableFonts","available","getWidth","fontFamily","measureText","baseWidths","baseFont","getPlugins","plugins","plugin","name","sort","getStunServerHost","__stunServerHost","setStunServerHost","host","async","getWebRTCInfo","reqId","localIPs","RTCPeerConnection","generatedReqId","crypto","randomUUID","stunInit","response","fetch","encodeURIComponent","ok","json","initStunServer","iceServers","urls","port","pc","ips","Set","Promise","resolve","timeout","setTimeout","close","Array","from","onicecandidate","event","candidate","clearTimeout","ipMatch","match","add","ipv6Match","createDataChannel","createOffer","then","offer","setLocalDescription","catch","getConfig","baseUrl","trackUrl","process","env","FINGERPRINT_BASE_URL","_b","TRACK_API","replace","sendFingerprint","options","url","method","headers","body","JSON","stringify","collectComponents","exclude","excludeComponents","webglInfo","has","vendor","renderer","version","gl","WebGLRenderingContext","debugInfo","getExtension","getParameter","UNMASKED_VENDOR_WEBGL","UNMASKED_RENDERER_WEBGL","VERSION","getWebGLInfo","audioFingerprint","AudioContext","webkitAudioContext","context","oscillator","createOscillator","analyser","createAnalyser","gain","createGain","scriptProcessor","createScriptProcessor","destination","type","frequency","setValueAtTime","currentTime","connect","start","fingerprint","frequencyData","Float32Array","frequencyBinCount","getFloatFrequencyData","slice","join","disconnect","getAudioFingerprint","webrtcInfo","language","languages","colorDepth","screen","screenResolution","availableScreenResolution","availWidth","availHeight","timezone","timezoneOffset","Date","getTimezoneOffset","indexedDb","cookiesEnabled","platform","hardwareConcurrency","deviceMemory","maxTouchPoints","vendorFlavors","webglVendor","webglRenderer","webglVersion","fonts","audio","doNotTrack","webrtcAvailable","webrtcLocalIPs","getFingerprint","components","componentsString","hash","message","msgBuffer","TextEncoder","encode","hashBuffer","subtle","digest","Uint8Array","map","b","padStart","sha256","timestamp","now","fireAndForget","URL","searchParams","set","buildTrackUrl","initRequest","publicKey","initUrl","config","getInitUrl","Error","status","data","req_id","track_url","stun","collect","initData","public_key","reject","readyState","undefined","addEventListener","endpointUrl","get","Fingerprint","assign","defaultOptions","createAPI"],"mappings":"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"}